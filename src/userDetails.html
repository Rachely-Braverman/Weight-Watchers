<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>user details</title>
</head>

<body>
    <ul id="userDisplay">
        <a id="dairyLink"></a>
        <h1 id="fullName"></h1>
        <div>
            <h3>address: </h3>
            <h4 id="street"></h4>
            <h4 id="houseNumber"></h4>
            <h4 id="city"></h4>
        </div>
        <h3>phone number: <h4 id="phone"></h4>
        </h3>
        <h3>email: <h4 id="email"></h4>
        </h3>
        <h3>bmi: <h4 id="bmi"></h4>
        </h3>
        <div id="meetings">
            <h3>meetings: </h3>
        </div>
    </ul>
</body>

</html>
<script type="text/javascript">
    const url = new URL(window.location.href);
    const userId = url.searchParams.get("id");
    const myUser = localStorage.getItem(userId);
    console.log("myUser" + myUser);
    const name1 = JSON.parse(myUser).firstName;
    const name2 = JSON.parse(myUser).lastName;
    const fullName = name1 + " " + name2;
    const city = JSON.parse(myUser).address.city;
    const street = JSON.parse(myUser).address.street;
    const houseNumber = JSON.parse(myUser).address.number;
    const phone = JSON.parse(myUser).phone;
    const email = JSON.parse(myUser).email;
    const hight = JSON.parse(myUser).hight;
    const startWeight = JSON.parse(myUser).weight.startWeight;
    const meetings = JSON.parse(myUser).weight.meeting;
    const bmi = url.searchParams.get("bmi");
    const link =document.createElement("a");
    let txt = document.createTextNode("dairy");
    link.appendChild(txt);
    link.href="/src/dairy.html?id=" + userId;
    document.getElementById("userDisplay").appendChild(link);
    document.getElementById("fullName").innerHTML += fullName;
    document.getElementById("street").innerHTML += street;
    document.getElementById("city").innerHTML += city;
    document.getElementById("houseNumber").innerHTML += houseNumber;
    document.getElementById("phone").innerHTML += phone;
    document.getElementById("email").innerHTML += email;
    document.getElementById("bmi").innerHTML += bmi;
    meetings.forEach(element => {
        document.getElementById("meetings").innerHTML += "Date: " + element.date + "<br/>";
        document.getElementById("meetings").innerHTML += "weight: " + element.weight + "<br/><br/>";
    });

</script>
